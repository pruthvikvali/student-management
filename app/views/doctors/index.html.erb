<%= link_to 'New doctor', new_doctor_path  %>

<style>
  table {
    border-collapse: collapse;
  }
  td, th {
    border: 1px solid black;
  }
  td + td, th + th {
    border-left: none;
  }
</style>

<%= form_tag(doctors_path, method: :get) do %>
<p><%= text_field_tag(:search, params[:search]) %>
<%= submit_tag ("search") %></p>
<% end %>

<% if params[:search].present? %>
  <% if @doctors.present? %>
    <h1><li>Search Results for: "<%= params[:search] %>":</li></h1>

<h1>Listing doctors</h1>
<table>
<tr>
<th>name</th>
<th>email</th>
<th>contact_no</th>
<th>patient_name</th>
<th colspan="3"> </th>
</tr>
 
<% @doctors.each do |doctor| %>
<tr>
<td><%= doctor.name %></td>
<td><%= doctor.email %></td>
<td><%= doctor.contact_no %></td>
<td>
  <ul>
<% doctor.patients.each do |patient| %>
<li> <%= patient.name %></li>
<% end %>
</ul>
</td>
<td><%= link_to 'Show', doctor_path(doctor) %></td>
<td><%= link_to 'Edit', edit_doctor_path(doctor) %></td>
<td><%= link_to 'destroy', doctor_path(doctor),
method: :delete, 
data:{confirm: 'are you sure?'}%></td>
</tr>
<% end %>
</table>
<% end %>
<%end%>





  


